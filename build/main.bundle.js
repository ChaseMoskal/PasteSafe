(function t(e,n,r){function o(s,a){if(!n[s]){if(!e[s]){var u=typeof require=="function"&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return o(n?n:t)},l,l.exports,t,e,n,r)}return n[s].exports}var i=typeof require=="function"&&require;for(var s=0;s<r.length;s++)o(r[s]);return o})({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});var r=function(){function t(t){var e=t.baseplate,n=t.toggleButtons;var r=this;this.baseplate=e;this.toggleButtons=n;this.baseplate.setAttribute("data-flyout-state",window.localStorage.getItem("flyout")||"active");this.toggleButtons.forEach(function(t){return t.onclick=function(t){return r.toggleHandler(t)}})}t.prototype.toggleHandler=function(t){var e=this.baseplate.getAttribute("data-flyout-state");var n=e==="active"?"hidden":"active";this.baseplate.setAttribute("data-flyout-state",n);window.localStorage.setItem("flyout",n);if(t){t.preventDefault();return false}};return t}();n.default=r},{}],2:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function a(t){try{u(r["throw"](t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})};var o=this&&this.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i;return{next:s(0),throw:s(1),return:s(2)};function s(t){return function(e){return a([t,e])}}function a(s){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,o&&(i=o[s[0]&2?"return":s[0]?"throw":"next"])&&!(i=i.call(o,s[1])).done)return i;if(o=0,i)s=[0,i.value];switch(s[0]){case 0:case 1:i=s;break;case 4:n.label++;return{value:s[1],done:false};case 5:n.label++;o=s[1];s=[0];continue;case 7:s=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){n.label=s[1];break}if(s[0]===6&&n.label<i[1]){n.label=i[1];i=s;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(s);break}if(i[2])n.ops.pop();n.trys.pop();continue}s=e.call(t,n)}catch(t){s=[6,t];o=0}finally{r=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};Object.defineProperty(n,"__esModule",{value:true});var i=t("pcrypto");var s=function(){function t(t){var e=t.root,n=t.officialBaseLink;var r=this;this.instantActionInProgress=false;this.officialBaseLink=n;this.elements={root:e,textInput:e.querySelector(".text-input"),textOutput:e.querySelector(".text-output"),passwordInput:e.querySelector(".key"),passwordTooltip:e.querySelector(".passbox .tooltip"),encryptButton:e.querySelector(".encrypt"),decryptButton:e.querySelector(".decrypt"),outputBlocker:e.querySelector(".output-blocker"),bottomLink:e.querySelector(".bottom-link")};this.elements.bottomLink.onclick=function(t){t.preventDefault;return false};this.elements.passwordInput.setAttribute("type","password");this.elements.passwordInput.setAttribute("placeholder","Password");this.elements.passwordInput.focus();this.setBottomLink();this.elements.encryptButton.addEventListener("change",function(){return r.refreshCryptionMode()});this.elements.decryptButton.addEventListener("change",function(){return r.refreshCryptionMode()});this.refreshCryptionMode();this.elements.textInput.addEventListener("keyup",function(){return r.instantAction()});this.elements.passwordInput.addEventListener("keyup",function(){return r.instantAction()});this.elements.encryptButton.addEventListener("change",function(){return r.instantAction()});this.elements.decryptButton.addEventListener("change",function(){return r.instantAction()});window.addEventListener("hashchange",function(){return r.interpretHash()});this.interpretHash();this.instantAction()}t.prototype.setBottomLink=function(t){if(t){this.elements.bottomLink.href=this.officialBaseLink+"#"+t;this.elements.bottomLink.textContent=this.officialBaseLink+"#"+t.substring(0,8)+"...";this.elements.bottomLink.setAttribute("data-show","")}else{this.elements.bottomLink.href="#";this.elements.bottomLink.textContent="";this.elements.bottomLink.removeAttribute("data-show")}};t.prototype.getCryptionMode=function(){var t=this.elements.root.querySelector("input[name=cryption_mode]:checked");return t.value};t.prototype.refreshCryptionMode=function(){if(this.getCryptionMode()==="encrypt"){this.elements.root.setAttribute("data-cryption-mode","encrypt");this.elements.decryptButton.parentElement.removeAttribute("data-checked");this.elements.encryptButton.parentElement.setAttribute("data-checked","")}else{this.elements.root.setAttribute("data-cryption-mode","decrypt");this.elements.encryptButton.parentElement.removeAttribute("data-checked");this.elements.decryptButton.parentElement.setAttribute("data-checked","")}};t.prototype.setCryptionMode=function(t){this.elements.encryptButton.checked=t==="encrypt"?true:false;this.elements.decryptButton.checked=t==="decrypt"?true:false;this.refreshCryptionMode()};t.prototype.instantAction=function(){return r(this,void 0,void 0,function(){var t,e,n,r,s,e,r,n,a;return o(this,function(o){switch(o.label){case 0:if(this.instantActionInProgress)return[2];this.instantActionInProgress=true;this.elements.passwordTooltip.removeAttribute("data-show");t=this.getCryptionMode();if(!(!!this.elements.textInput.value&&!!this.elements.passwordInput.value))return[3,11];if(!(t==="encrypt"))return[3,5];e=this.elements.passwordInput.value;n=this.elements.textInput.value;o.label=1;case 1:o.trys.push([1,3,,4]);return[4,i.encrypt({password:e,plaintext:n})];case 2:r=o.sent();this.elements.textOutput.textContent=r;this.setBottomLink(r);return[3,4];case 3:s=o.sent();this.elements.textOutput.textContent="";this.setBottomLink();return[3,4];case 4:this.instantActionInProgress=false;return[3,10];case 5:e=this.elements.passwordInput.value;r=this.elements.textInput.value;o.label=6;case 6:o.trys.push([6,8,,9]);return[4,i.decrypt({password:e,ciphertext:r})];case 7:n=o.sent();this.elements.textOutput.textContent=n;return[3,9];case 8:a=o.sent();this.elements.textOutput.textContent="";return[3,9];case 9:this.setBottomLink();this.instantActionInProgress=false;o.label=10;case 10:return[3,12];case 11:this.elements.textOutput.textContent="";this.setBottomLink();this.instantActionInProgress=false;o.label=12;case 12:return[2]}})})};t.prototype.interpretHash=function(){var t=/(?:^|#)([0-9a-fA-f]{10,})/i.exec(window.location.hash);if(t){var e=t[1];this.elements.textInput.value=e;this.setCryptionMode("decrypt");this.elements.passwordInput.focus();this.instantAction();this.elements.passwordTooltip.setAttribute("data-show","")}window.location.hash=""};return t}();n.default=s},{pcrypto:5}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});var r=t("./Flyout");var o=t("./PasteSafe");var i=/github\.io/i.test(window.location.host)||/pastesafe\.com/i.test(window.location.host);if(i&&!/https/i.test(window.location.protocol))window.location.href="https:"+window.location.href.substring(window.location.protocol.length);var s=new r.default({baseplate:document.querySelector(".baseplate"),toggleButtons:Array.from(document.querySelectorAll(".flyout-toggle-button"))});var a=new o.default({root:document.querySelector("[paste-safe]"),officialBaseLink:window.location.origin+"/"})},{"./Flyout":1,"./PasteSafe":2}],4:[function(t,e,n){(function(r){if(typeof e==="object"&&typeof e.exports==="object"){var o=r(t,n);if(o!==undefined)e.exports=o}else if(typeof define==="function"&&define.amd){define(["require","exports"],r)}})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});function n(t){return Array.from(new Uint8Array(t)).map(function(t){return("00"+t.toString(16).toUpperCase()).slice(-2)}).join("")}e.hex=n;function r(t){var e=t.length/2;var n=new ArrayBuffer(e);var r=new Uint8Array(n);for(var o=0;o<e;o++){var i=o*2;var s=t[i]+t[i+1];r[o]=parseInt(s,16)}return n}e.unhex=r})},{}],5:[function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function a(t){try{u(r["throw"](t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})};var o=this&&this.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i;return{next:s(0),throw:s(1),return:s(2)};function s(t){return function(e){return a([t,e])}}function a(s){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,o&&(i=o[s[0]&2?"return":s[0]?"throw":"next"])&&!(i=i.call(o,s[1])).done)return i;if(o=0,i)s=[0,i.value];switch(s[0]){case 0:case 1:i=s;break;case 4:n.label++;return{value:s[1],done:false};case 5:n.label++;o=s[1];s=[0];continue;case 7:s=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){n.label=s[1];break}if(s[0]===6&&n.label<i[1]){n.label=i[1];i=s;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(s);break}if(i[2])n.ops.pop();n.trys.pop();continue}s=e.call(t,n)}catch(t){s=[6,t];o=0}finally{r=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};(function(r){if(typeof e==="object"&&typeof e.exports==="object"){var o=r(t,n);if(o!==undefined)e.exports=o}else if(typeof define==="function"&&define.amd){define(["require","exports","./hexer"],r)}})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=t("./hexer");var i=window.crypto||window.msCrypto;var s=i.subtle||window.crypto.webkitSubtle;var a=Object.freeze({algorithm:"aes-gcm",hashAlgorithm:"sha-256",ivSize:128});var u=Object.freeze({charset:"utf-8"});function c(t){var e=t.charset,n=t.password;return r(this,void 0,void 0,function(){var t;return o(this,function(r){switch(r.label){case 0:return[4,s.digest(a.hashAlgorithm,new TextEncoder(e).encode(n))];case 1:t=r.sent();return[2,s.importKey("raw",t,"aes-gcm",false,["encrypt","decrypt"])]}})})}function l(t){var e=t.password,l=t.plaintext,p=t.charset,h=p===void 0?u.charset:p;return r(this,void 0,void 0,function(){var t,r,u,p,f,d,y,w,v,m;return o(this,function(o){switch(o.label){case 0:t=a.ivSize,r=a.algorithm;if(!e)throw new Error("encrypt requires option 'password'");if(!l)throw new Error("encrypt requires option 'plaintext'");u=new Uint8Array(t);i.getRandomValues(u);f=Uint8Array.bind;w=(y=s).encrypt;v=[{name:r,iv:u}];return[4,c({charset:h,password:e})];case 1:return[4,w.apply(y,v.concat([o.sent(),new TextEncoder(h).encode(l)]))];case 2:p=new(f.apply(Uint8Array,[void 0,o.sent()]));m=new ArrayBuffer(t+p.byteLength);new Uint8Array(m,0,t).set(u);new Uint8Array(m,t,p.byteLength).set(p);return[2,n.hex(m)]}})})}e.encrypt=l;function p(t){var e=t.password,i=t.ciphertext,l=t.charset,p=l===void 0?u.charset:l;return r(this,void 0,void 0,function(){var t,r,u,l,h,f,d,y,w;return o(this,function(o){switch(o.label){case 0:t=a.algorithm,r=a.ivSize;if(!e)throw new Error("decrypt requires option 'password'");if(!i)throw new Error("decrypt requires option 'ciphertext'");u=n.unhex(i);h=Uint8Array.bind;y=(d=s).decrypt;w=[{name:t,iv:new Uint8Array(u,0,r)}];return[4,c({charset:p,password:e})];case 1:return[4,y.apply(d,w.concat([o.sent(),new Uint8Array(u,r,u.byteLength-r)]))];case 2:l=new(h.apply(Uint8Array,[void 0,o.sent()]));return[2,new TextDecoder(p).decode(l)]}})})}e.decrypt=p})},{"./hexer":4}]},{},[3]);
